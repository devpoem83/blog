---
title: "용어 및 개념"
date: 2020-07-23 15:44:00 -0400
categories: ELK스택
---

## 클러스터

-   클러스터는 물리적인 노드 인스턴스들의 모임
-   클러스터는 모든 노드의 검색과 색인 작업을 관장하는 논리적인 개념

## 노드

### 1. 마스터 노드

    -   클러스터를 관리
    -   노드 추가와 제거 같은 클러스터의 전반적인 관리를 담당

### 2. 데이터 노드

    -   실질적인 데이터 저장
    -   검색과 통계 같은 데이터 관련 작업을 수

### 3. 코디네이팅 노드

    -   사용자의 요청만 받아서 처리
    -   클러스터 관련 요청은 마스터 노드에 전달하고 테이터 관련 요청은 데이터 노드에 전달

### 4. 인제스트 노드

    -   문서의 전처리 작업을 담당
    -   인덱스 생성 전 문서의 형식을 다양하게 변경

## 샤드

-   색인된 문서는 하나의 인덱스에 담김
-   인덱스 내부에 색인된 데이터는 물리적인 공간에 여러 개의 파티션으로 나뉘어 구성되는데, 이 파티션을 샤드라고 부름
-   엘라스틱서치는 다수의 샤드로 문서를 분산 저장하고 있어 데이터 분실 위험을 최소화
-   인덱스를 생성할 때 별도의 설정을 하지 않으면 7.0 버전부터는 디폴트로 1개의 샤드로 인덱스가 구성되며 6.x 이하 버전에서는 5개로 구성
-   클러스터에 노드를 추가하게 되면 샤드들이 각 노드들로 분산되고 디폴트로 1개의 복제본을 생성
-   처음 생성된 샤드를 프라이머리 샤드(Primary Shard), 복제본은 리플리카(Replica) 라고 부름

## 인덱스

-   인덱스는 저장공간
-   하나의 인덱스는 하나의 타입만 가지며 하나의 물리적인 노드에 여러 개의 논리적인 인덱스를 생성
-   검색시 인덱스 이름으로 문서 데이터를 검색하며, 여러 개의 인덱스를 동시에 검색하는 것도 가능
-   엘라스틱서치를 분산환경으로 구성하면 하나의 인덱스가 여러 노드에 분산 저장되어 관리
-   엘라스틱서치는 인덱스 생성시 기본적으로 5개의 프라이머리 샤드와 1개의 레플리가 샤드 세트를 생성
-   인덱스의 이름은 모두 소문자여야 하며, 추가, 수정, 삭제, 검색은 RESTfull API로 수행
-   만약 인덱스가 없는 상태에서 데이터가 추가된다면 데이터를 이용해 인덱스가 자동으로 생성

## 타입

-   인덱스의 논리적 구조를 의미하며, 인덱스 속성에 따라 분류
-   인덱스당 하나의 타입만을 사용
-   엘라스틱서치 6.0 이하 버전에서는 특정 카테고리를 분류하는 목적으로 많이 사용되었음
-   현재 버전에서는 타입을 사용하는 것을 권장하지 않기 때문에 장르별로 별도의 인덱스를 각각 생성

## 문서

-   엘라스틱서치에서 데이터가 저장되는 최소 단위
-   기본적으로 JSON 포멧으로 데이터가 저장
-   데이터베이스와 비교하자면 테이블의 행이 엘라스틱서치의 문서에 해당
-   하나의 문서는 다수의 필드로 구성돼 있는데 각 필드는 데이터의 형태에 따라 용도에 맞는 데이터타입을 정의
-   문서는 중첩 구조를 지원하기 때문에 이를 이용해 문서 안에 문서를 저장할 것도 가능

## 필드

-   문서를 구성하기 위한 속성
-   일반적으로 데이터베이스의 칼럼과 비교할 수 있으나 칼럼이 정적인 데이터 타입인 데 반해 필드는 좀 더 동적인 데이터 타입
-   하나의 필드는 목적에 따라 다수의 데이터 타입 가짐

## 매핑

-   문서의 필드와 필드의 속성을 정의하고 그에 따른 색인 방법을 정의하는 프로세스
-   인덱스의 매핑 정보에는 여러 가지 데이터 타입을 지정할 수 있지만 필드명은 중복해서 사용

## Elasticsearch VS RDB

| `ElasticSearch` |   `RDB`   |
| :-------------: | :-------: |
|      Index      | Database  |
|      Shard      | Partition |
|      Type       |   Table   |
|    Document     |    Row    |
|      Field      |  Column   |
|     Mapping     |  Schema   |
|    Query DSL    |    SQL    |

## CRUD 비교

| `ElasticSearch` |            `기능`            |     `RDB`      |
| :-------------: | :--------------------------: | :------------: |
|       GET       |         데이터 조회          |     SELECT     |
|       PUT       |         데이터 생성          |     INSERT     |
|      POST       | 인덱스 업데이트, 데이터 조회 | UPDATE, SELECT |
|     DELETE      |         데이터 삭제          |     DELETE     |
|      HEAD       |      인덱스의 정보 확인      |       -        |
