---
title: "도메인 주도 설계(DDD)"
date: 2020-07-23 15:44:00 -0400
categories: 개발전략 DDD
---

## 설계방식 비교

|     `항목`      | `데이터 주도 설계`                                                                                                                                                                             | `도메인 주도 설계`                                                                                                                                                                                                                                      |
| :-------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|      객체       | 데이터베이스 객체(DB Table) 와 비즈니스 객체가 상이 한 경우가 많음.                                                                                                                            | 데이터베이스 객체(DB Table) 와 비즈니스 객체가 일치 함.                                                                                                                                                                                                 |
|  객체간의 관계  | 객체 간의 관계는 사라지고 데이터베이스 접근로직 구현에 집중.                                                                                                                                   | 데이터베이스 구조를 의식하지 않고 객체 관계를 기반으로 비지니스 로직 구현에 집중.                                                                                                                                                                       |
|   개발 사이클   | 데이터베이스에 의존하여 개발.                                                                                                                                                                  | - 비지니스와 데이터베이스 구현이 동시에 이루어져야 하기때문에, 구현-피드백-구현의 개발 사이클이 느려짐.<br>데이터베이스에 의존하지 않은 상태에서 개발이 가능.<br>- 객체와 비지니스만을 고려하여 구현하기때문에 구현-피드백-구현의 개발 사이클이 빨라짐. |
|   기능 재사용   | DB구조는 파악이 가능하지만 구현되어있는 비지니스 기능에 대해 파악이 어려워 중복된 코드를 생산하게 됨.                                                                                          | 비지니스 기능 파악이 쉽기에 필요한 기능을 찾고 재사용하는데 용이함.                                                                                                                                                                                     |
| 프로젝트 사이클 | 기획서 분석 → 기능정의 → DB객체(Table) 도축 → DB관계 정의 → 개발객체 도출(POJO) → 개발 기능 구현 → 테스트 → DB객체(Table) 수정 → DB관계 재정의 → 개발객체(POJO) 수정 → 개발 기능 수정 → 테스트 | 기획서 분석 → 기능정의 → 개발객체 도출(POJO) → 개발 기능 구현 → 테스트 → 개발객체(POJO) 수정 → 개발 기능 수정 → 테스트 → DB객체 생성 및 관계 정의                                                                                                       |

## 시작

    도메인에 집중하고 도메인의 개념을 커뮤니케이션과 코드로 부드럽게 연결시키려는 과정이 도메인-주도 설계의 핵심.
    https://www.slideshare.net/baejjae93/ss-27536729

## 모델

    domain을 분석해서 모델을 만드는 일은 사실 늘 해오던 일이다.
    다만 여기서 주의해야 할 점은 분석을 통해 얻어진 ‘분석 모델’과 실제 구현에 쓰일 ‘설계 모델’이 달라지면 안된다는 점이다.
    ‘분석 모델’과 ‘설계 모델’이 나뉘게 되면 domain에 요구사항이 늘어나거나, 변경이 생기거나, 시간의 경과로 인해 두 모델간의 결합성이 약해지게 된다는 것이다.
    모델은 domain을 표현하기 위한 방법이지 구현을 편하게 하는 방법이 아니라는 점이다.
    당장 구현이 복잡해 보일지라도 장기적으로 봤을 때 모델 속에 내재된 domain을 잃지 않는 것이 소프트웨어의 생명을 유지시켜줄 것이다.

## 구성요소.

|    `요소`    | `의미`                                                                                                                                      | `내용`                                                                                                                                                                                                                              |
| :----------: | :------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   `Entity`   | 고유의 식별자를 갖는 객체로 자신의 라이프 사이클을 갖는다.                                                                                  | Entity는 단순히 데이터를 담고 있는 데이터 구조라기보다는 데이터와 함께 기능을 제공하는 객체                                                                                                                                         |
|   `Value`    | 고유의 식별자를 갖기 않는 객체로 주로 개념적으로 하나인 도메인 객체의 속성을 표현할 때 사용한다.                                            | Value는 immutable로 구현하는 것으로 권장한다.                                                                                                                                                                                       |
| `Aggregate`  | 외부에서 접근하는 방법은 하나지만, 하나의 단위로 간주되는 관련된 객체들의 집합이다.<br>Transaction, 데이터 무결성 등을 처리하기에 용이하다. | 도메인이 커질수록 Entity와 Value가 많아지고 관리하기 힘들다.<br>관련 객체를 하나로 묶은 객체이다.<br>- 주문 : 주문자, 배송지 정보, 주문 목록, 총 결제 금액<br>내부 구현을 숨겨서 Aggregate 단위로 구현을 캡슐화할 수 있도록 돕는다. |
| `Repository` | 객체를 저장/조회하는 일을 담당한다.<br>(도메인 모델의 영속성을 처리한다.)                                                                   | Aggregate 단위로 도메인 객체를 저장하고 조회하는 기능을 정의한다.<br>- 저장하는 메소드<br>- 루트 식별자로 Aggregate를 조회하는 Method                                                                                               |
|  `Service`   | 상태정보를 관리하지는 않지만, 행위 자체를 담당한다.                                                                                         |                                                                                                                                                                                                                                     |
|  `Factory`   | 복잡한 절차를 지닌 Entity 들의 생성을 Factory로 묶에서 관리한다.                                                                            |                                                                                                                                                                                                                                     |

## 관계

|    `종류`    | `내용`                            |
| :----------: | :-------------------------------- |
| Many-To-One  | 다수의 객체가 다른 한 객체와 연결 |
| One-To-Many  | 한 객체가 다른 다수 객체와 연결   |
|  One-To-One  | 한 객체가 다른 한 객체와 연결     |
| Many-To-Many | 콜렉션                            |

## 도메인 주도 설계를 성공적으로 적용하기 위해서는.

    - Ubiquitous Language로 고객과 개발자들 사이에 공통된 용어를 사용함으로써<br />의사소통의 단절 및 오해로 인해 잘못된 소프트웨어가 개발되는 것을 방지.
    - Model-Driven Design 은 분석, 설계, 구현의 모든 단계를 관통하는 하나의 모델을 만들자는 개념이다.<br>즉, 표현적 차이를 줄임으로써 소프트웨어가 도메인의 모습을 투영하도록 만듬.
    - 객체-지향 언어를 사용하고 비침투적인 POJO(Plain Old Java Object) 기반의 경량 프레임워크를 적용.

참고자료.

https://yunsunghan.tistory.com/123

https://www.slideshare.net/javajigi/orm-27141159

http://redutan.github.io/2015/10/06/ddd-chapter-04

https://www.slideshare.net/madvirus/ddd-final

http://aeternum.egloos.com/1366968
